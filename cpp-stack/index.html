<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta content="width=device-width" name="viewport"><link href="/favicon.svg" rel="icon" type="image/svg+xml"><meta content="Astro v4.10.2" name="generator"><meta content="Uchen - efficient machine learning framework" name="description"><title>Open Source C++ Stack — UchenML</title><meta content="C++ is a beautiful and powerful language, but it does have its sharp edges. This article details open-source projects to reduce the number of cuts." name="description"/><meta content="index,follow" name="robots"/><link href="https://uchenml.tech/cpp-stack/" rel="canonical"/><meta content="Open Source C++ Stack" property="og:title"/><meta content="C++ is a beautiful and powerful language, but it does have its sharp edges. This article details open-source projects to reduce the number of cuts." property="og:description"/><meta content="https://uchenml.tech/cpp-stack/" property="og:url"/><meta content="article" property="og:type"/><meta content="https://uchenml.tech/_astro/absl.UHZlobUY_1meKxQ.webp" property="og:image"/><meta content="en" property="og:locale"/><meta content="UchenML" property="og:site_name"/><meta content="Eugene Ostroukhov" property="og:article:author"/><meta content="summary" name="twitter:card"/><meta content="@eeuoss" name="twitter:site"/><meta content="@eeuoss" name="twitter:creator"/><script async src="https://www.googletagmanager.com/gtag/js?id=G-9MVL69VNJN"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-9MVL69VNJN")</script><title>Uchen -</title><link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;500;600;700&display=swap" rel="stylesheet"><link href="/_astro/_page_.Cj9NU4DZ.css" rel="stylesheet"><style>:root{--color-bg:255 255 255;--color-border:255 255 255;--color-box:255 255 255;--box-border:229 231 235;--box-sd:226 232 240/.5;--heading-1:23 37 84;--heading-2:31 41 55;--heading-3:55 65 81}.dark{--color-bg:3 7 18;--color-box:17 24 39;--box-border:243 244 246/.1;--box-sd:transparent;--heading-1:255 255 255;--heading-2:243 244 246;--heading-3:209 213 219}html{scroll-behavior:smooth}body{font-family:Raleway,sans-serif}[data-toggle-nav][data-open-nav=true] #line1{transform:translateY(.375rem) rotate(40deg)}[data-toggle-nav][data-open-nav=true] #line2{transform:scaleX(0);opacity:0}[data-toggle-nav][data-open-nav=true] #line3{transform:translateY(-.375rem) rotate(-40deg)}[data-nav-overlay][data-is-visible=true]{visibility:visible;display:flex}</style><script type="module">const e=document.querySelector("[data-toggle-nav]"),t=document.querySelector("[data-navbar]"),s=document.querySelector("[data-nav-overlay]");e&&(e.addEventListener("click",(a=>{a.preventDefault(),"false"===e.getAttribute("data-open-nav")?(e.setAttribute("data-open-nav","true"),s.setAttribute("data-is-visible","true"),document.body.classList.add("!overflow-y-hidden"),t.style.height=`${t.scrollHeight}px`):(e.setAttribute("data-open-nav","false"),s.setAttribute("data-is-visible","false"),document.body.classList.remove("!overflow-y-hidden"),t.style.height="0px")})),t.addEventListener("click",(()=>{e.setAttribute("data-open-nav","false"),s.setAttribute("data-is-visible","false"),document.body.classList.remove("!overflow-y-hidden"),t.style.height="0px"})),s.addEventListener("click",(()=>{e.setAttribute("data-open-nav","false"),s.setAttribute("data-is-visible","false"),document.body.classList.remove("!overflow-y-hidden"),t.style.height="0px"})));const o=document.querySelector("[data-switch-theme]");"dark"===localStorage.getItem("appTheme")||!("appTheme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),o&&o.addEventListener("click",(e=>{e.preventDefault();const t=document.documentElement;t&&(localStorage.getItem("appTheme")?"light"===localStorage.getItem("appTheme")?(t.classList.add("dark"),localStorage.setItem("appTheme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("appTheme","light")):t.classList.contains("dark")?(t.classList.remove("dark"),localStorage.setItem("appTheme","light")):(t.classList.add("dark"),localStorage.setItem("appTheme","dark")))}))</script></head><body class="bg-amber-50 dark:bg-current overflow-hidden overflow-y-auto"><header class="inset-x-0 absolute py-6 top-0 z-50"><div class="mx-auto lg:px-5 max-w-7xl md:px-14 px-5 sm:px-8 w-full undefined"><nav class="flex justify-between gap-6 relative w-full"><a href="/"><span class="dark:text-white text-gray-900"><svg class="w-36" viewBox="0 0 571.7 180" xmlns="http://www.w3.org/2000/svg" id="Layer_1" style="enable-background:new 0 0 571.7 180" version="1.1" x="0px" xml:space="preserve" xmlns:xlink="http://www.w3.org/1999/xlink" y="0px"><style>.st0{fill:currentColor}.st1{fill:#0891b2}.st2{fill:#f97316}</style><g id="g16" transform="translate(33.1)"><g id="g9" transform="translate(0,-261.38)"><g id="g8"><path d="m 189.7,318.37 h 7.08 v 53.08 c 0,4.38 -1.4,7.84 -4.2,10.36 -2.8,2.53 -7.09,3.79 -12.89,3.79 -5.8,0 -10.13,-1.26 -12.99,-3.79 -2.87,-2.53 -4.3,-5.98 -4.3,-10.36 v -53.08 h 7.08 v 53.08 c 0,2.49 0.84,4.47 2.53,5.91 1.68,1.45 4.25,2.17 7.68,2.17 3.37,0 5.88,-0.72 7.53,-2.17 1.65,-1.45 2.48,-3.42 2.48,-5.91 z" class="st0" id="path1"></path><path d="m 240.76,365.89 h 7.08 v 5.56 c 0,4.38 -1.35,7.84 -4.04,10.36 -2.7,2.53 -6.88,3.79 -12.54,3.79 -5.66,0 -9.88,-1.26 -12.64,-3.79 -2.76,-2.53 -4.14,-5.98 -4.14,-10.36 v -40.44 c 0,-4.38 1.35,-7.84 4.04,-10.36 2.7,-2.53 6.88,-3.79 12.54,-3.79 5.66,0 9.87,1.26 12.64,3.79 2.76,2.53 4.14,5.98 4.14,10.36 v 9.61 h -7.08 v -9.61 c 0,-2.56 -0.79,-4.55 -2.38,-5.96 -1.59,-1.42 -4.03,-2.12 -7.33,-2.12 -3.23,0 -5.63,0.71 -7.18,2.12 -1.55,1.42 -2.33,3.4 -2.33,5.96 v 40.44 c 0,2.49 0.79,4.47 2.38,5.91 1.58,1.45 4.03,2.17 7.33,2.17 3.23,0 5.63,-0.72 7.18,-2.17 1.55,-1.45 2.32,-3.42 2.32,-5.91 v -5.56 z" class="st0" id="path2"></path><path d="m 265.53,384.09 v -65.72 h 7.08 v 29.32 h 19.92 v -29.32 h 7.08 v 65.72 h -7.08 V 353.76 H 272.6 v 30.33 z" class="st0" id="path3"></path><path d="m 319.82,384.09 v -65.72 h 28.81 v 6.07 H 326.9 v 23.25 h 17.69 v 6.07 H 326.9 v 24.27 h 22.75 v 6.07 h -29.83 z" class="st0" id="path4"></path><path d="m 364.81,384.09 v -65.72 h 6.77 l 22.24,50.55 v -50.55 h 7.08 v 65.72 h -6.77 l -22.24,-50.55 v 50.55 z" class="st0" id="path5"></path><path d="m 419.61,384.09 v -11.12 h 9.1 v 11.12 z" class="st0" id="path6"></path><path d="m 447.41,384.09 v -65.72 h 9.91 l 12.34,44.39 12.23,-44.39 h 9.91 v 65.72 h -7.08 V 329.7 l -11.83,42.26 h -6.57 L 454.49,329.7 v 54.39 z" class="st0" id="path7"></path><path d="m 512.02,318.37 h 7.08 v 59.65 h 18.5 v 6.07 h -25.58 z" class="st0" id="path8"></path></g></g></g><g id="g15" transform="translate(-271.20994,-114.40412)"><path d="m 428.74,204.77 c 0,13.54 -0.06,27.08 0.05,40.62 0.02,3.09 -0.97,5.01 -3.76,6.61 -23.48,13.42 -46.92,26.92 -70.25,40.6 -3.58,2.1 -6.24,1.93 -9.72,-0.11 -23.14,-13.55 -46.38,-26.94 -69.66,-40.25 -2.95,-1.69 -4.2,-3.62 -4.19,-7.06 0.11,-27.19 0.11,-54.39 0.01,-81.58 -0.01,-3.36 1.03,-5.43 4.04,-7.14 23.59,-13.47 47.1,-27.06 70.57,-40.73 2.92,-1.7 5.25,-1.81 8.23,-0.07 23.56,13.74 47.18,27.38 70.86,40.92 2.9,1.66 3.9,3.67 3.87,6.9 -0.13,13.75 -0.05,27.52 -0.05,41.29 z m -146.95,-0.61 c 0,11.82 0.07,23.63 -0.05,35.45 -0.03,2.85 0.86,4.64 3.4,6.09 20.29,11.61 40.53,23.29 60.71,35.08 2.94,1.72 5.26,1.77 8.22,0.04 20.18,-11.8 40.42,-23.48 60.71,-35.09 2.51,-1.44 3.49,-3.16 3.48,-6.04 -0.09,-23.63 -0.09,-47.26 0.01,-70.89 0.01,-2.95 -1.13,-4.56 -3.59,-5.97 -20.48,-11.73 -40.91,-23.54 -61.31,-35.41 -2.36,-1.37 -4.28,-1.44 -6.66,-0.05 -20.5,11.93 -41.03,23.79 -61.61,35.59 -2.37,1.36 -3.39,2.98 -3.36,5.75 0.12,11.82 0.05,23.63 0.05,35.45 z" class="st0" id="path9"></path><path d="m 328.36,147.58 c 6.72,-3.83 13.42,-7.7 20.17,-11.46 0.66,-0.37 1.85,-0.46 2.49,-0.12 6.92,3.79 13.77,7.68 20.65,11.55 -0.17,0.42 -0.33,0.83 -0.5,1.25 -14.11,0 -28.23,0 -42.34,0 -0.16,-0.4 -0.32,-0.81 -0.47,-1.22 z" class="st1" id="path10"></path><path d="m 290.11,194.66 c 0.04,-7.73 0.04,-15.47 0.16,-23.2 0.01,-0.76 0.52,-1.84 1.14,-2.21 6.74,-4.1 13.54,-8.09 20.33,-12.1 0.28,0.35 0.55,0.7 0.83,1.05 -7.06,12.22 -14.11,24.45 -21.17,36.67 -0.43,-0.07 -0.86,-0.14 -1.29,-0.21 z" class="st2" id="path11"></path><path d="m 311.76,251.31 c -6.68,-3.9 -13.37,-7.77 -20.01,-11.74 -0.65,-0.39 -1.33,-1.37 -1.35,-2.1 -0.18,-7.88 -0.23,-15.77 -0.32,-23.66 0.44,-0.06 0.89,-0.13 1.33,-0.19 7.06,12.22 14.11,24.45 21.17,36.67 -0.27,0.35 -0.55,0.69 -0.82,1.02 z" class="st1" id="path12"></path><path d="m 371.64,260.9 c -6.72,3.83 -13.42,7.7 -20.17,11.46 -0.66,0.37 -1.85,0.46 -2.49,0.12 -6.92,-3.79 -13.77,-7.68 -20.65,-11.55 0.17,-0.42 0.33,-0.83 0.5,-1.25 14.11,0 28.23,0 42.34,0 0.16,0.4 0.32,0.81 0.47,1.22 z" class="st2" id="path13"></path><path d="m 409.89,213.83 c -0.04,7.73 -0.04,15.47 -0.16,23.2 -0.01,0.76 -0.52,1.84 -1.14,2.21 -6.74,4.1 -13.54,8.09 -20.33,12.1 -0.28,-0.35 -0.55,-0.7 -0.83,-1.05 7.06,-12.22 14.11,-24.45 21.17,-36.67 0.43,0.07 0.86,0.14 1.29,0.21 z" class="st1" id="path14"></path><path d="m 388.24,157.17 c 6.68,3.9 13.37,7.77 20.01,11.74 0.65,0.39 1.33,1.37 1.35,2.1 0.18,7.88 0.23,15.77 0.32,23.66 -0.44,0.06 -0.89,0.13 -1.33,0.19 -7.06,-12.22 -14.11,-24.45 -21.17,-36.67 0.27,-0.34 0.55,-0.68 0.82,-1.02 z" class="st2" id="path15"></path></g></svg></span></a><div class="hidden backdrop-blur-xl backdrop-filter bg-box-bg bg-opacity-50 fixed inset-0 lg:!hidden" aria-hidden="true" data-nav-overlay></div><div class="flex flex-col lg:flex-row lg:items-center w-full absolute bg-body border-x border-x-box-border duration-300 ease-linear gap-x-4 gap-y-6 h-0 lg:!h-auto lg:bg-transparent lg:border-x-0 lg:justify-between lg:relative lg:scale-y-100 lg:top-0 overflow-hidden top-full" data-navbar><ul class="flex flex-col lg:flex-row lg:items-center w-full border-box-border border-t gap-x-3 gap-y-4 lg:border-t-0 lg:justify-center lg:pt-0 lg:px-0 pt-6 px-6 text-heading-2 text-lg"><li><a href="/" class="duration-300 ease-linear font-medium hover:text-primary py-3">Home</a></li><li><a href="/blog" class="duration-300 ease-linear font-medium hover:text-primary py-3">Blog</a></li></ul></div><div class="flex gap-x-3 items-center min-w-max"><button class="flex relative outline-none border border-box-border lg:p-3 p-2 rounded-full text-heading-2" data-switch-theme><svg class="w-6 h-6 dark:flex hidden" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" stroke-linecap="round" stroke-linejoin="round"></path></svg> <svg class="w-6 h-6 dark:hidden" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" stroke-linecap="round" stroke-linejoin="round"></path></svg> <span class="sr-only">switch theme</span></button> <button class="flex flex-col h-auto lg:hidden lg:invisible outline-none relative w-7" data-open-nav="false" data-toggle-nav><span class="w-6 bg-heading-2 duration-300 ease-linear h-0.5 transition-all rounded-full" id="line1"></span> <span class="w-6 bg-heading-2 duration-300 ease-linear h-0.5 transition-all mt-1 rounded-ful origin-center" id="line2"></span> <span class="w-6 bg-heading-2 duration-300 ease-linear h-0.5 transition-all mt-1 rounded-ful" id="line3"></span> <span class="sr-only">togglenav</span></button> <a href="/rss.xml" class="text-muted dark:focus:ring-gray-700 dark:hover:bg-gray-700 dark:text-gray-400 focus:outline-none focus:ring-4 focus:ring-gray-200 hidden hover:bg-gray-100 items-center md:inline-flex p-2.5 rounded-lg text-sm" aria-label="RSS Feed"><svg class="h-5 w-5" viewBox="0 0 24 24" height="1em" width="1em" data-icon="tabler:rss"><symbol id="ai:tabler:rss"><path d="M4 19a1 1 0 1 0 2 0a1 1 0 1 0-2 0M4 4a16 16 0 0 1 16 16M4 11a9 9 0 0 1 9 9" stroke-linecap="round" stroke-linejoin="round" fill="none" stroke="currentColor" stroke-width="2"/></symbol><use xlink:href="#ai:tabler:rss"></use></svg></a></div></nav></div></header><main class="flex flex-col overflow-hidden pt-24"><section class="mx-auto lg:py-20 px-2 py-8 sm:py-16"><article><header class=""><div class="flex flex-col justify-between max-w-3xl sm:flex-row mb-2 mt-0 sm:items-center"><p><svg class="inline-block -mt-0.5 dark:text-gray-400 h-4 w-4" viewBox="0 0 24 24" height="1em" width="1em" data-icon="tabler:clock"><symbol id="ai:tabler:clock"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0-18 0"/><path d="M12 7v5l3 3"/></g></symbol><use xlink:href="#ai:tabler:clock"></use></svg> <time class="inline-block dark:text-slate-400" datetime="Wed Jun 19 2024 17:00:00 GMT-0700 (Pacific Daylight Time)">Jun 20, 2024</time> · <svg class="inline-block -mt-0.5 dark:text-gray-400 h-4 w-4" viewBox="0 0 24 24" height="1em" width="1em" data-icon="tabler:user"><symbol id="ai:tabler:user"><path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0-8 0M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2" stroke-linecap="round" stroke-linejoin="round" fill="none" stroke="currentColor" stroke-width="2"/></symbol><use xlink:href="#ai:tabler:user"></use></svg> <span class="inline-block dark:text-slate-400">Eugene Ostroukhov </span>· <a href="/category/engineering" class="inline-block dark:text-slate-400 hover:underline">Engineering </a>&nbsp;· <span>7</span> min read</p></div><h1 class="font-bold dark:text-slate-200 font-heading leading-tighter max-w-3xl md:text-5xl text-4xl tracking-tighter">Open Source C++ Stack</h1><p class="dark:text-slate-400 max-w-3xl mb-8 md:text-2xl mt-4 text-justify text-muted text-xl">C++ is a beautiful and powerful language, but it does have its sharp edges. This article details open-source projects to reduce the number of cuts.</p><img alt="C++ is a beautiful and powerful language, but it does have its sharp edges. This article details open-source projects to reduce the number of cuts." class="mx-auto bg-gray-400 dark:bg-slate-700 hidden max-w-xl mb-6 md:block sm:rounded-md" crossorigin="anonymous" decoding="async" height="132" loading="eager" referrerpolicy="no-referrer" sizes="(min-width: 375px) 375px, 100vw" src="/_astro/absl.UHZlobUY.png" srcset="/_astro/absl.UHZlobUY_25BQ9T.webp 375w, /_astro/absl.UHZlobUY_3b4Yv.webp 640w, /_astro/absl.UHZlobUY_18lf4w.webp 750w" style="object-fit:cover;object-position:center;max-width:375px;max-height:132px;aspect-ratio:2.840909090909091;width:100%;max-width:650px" width="375"></header><div class="mx-auto mt-8 dark:prose-a:text-blue-400 dark:prose-headings:text-slate-300 dark:prose-invert lg:prose-xl prose prose-a:text-primary prose-headings:font-bold prose-headings:font-heading prose-headings:leading-tighter prose-headings:scroll-mt-[80px] prose-headings:tracking-tighter prose-img:rounded-md prose-img:shadow-lg prose-li:my-0 prose-md prose-slate"><h2 id="overview">Overview</h2><p>C++ is often labeled as “unsafe” and “complex,” but I find these critiques unjustified. My experience working on major projects like Chromium, Node, and gRPC — each a non-trivial codebase deployed on millions of devices, both virtual and physical, and subject to rigorous scrutiny—has shown me the true power and reliability of C++. Let’s not forget the remarkable engineering feats made possible by C++, such as Unreal Engine. Even Linux and Git, both written in C (arguably even less “safe” than C++), stand as testaments to the robust potential of these languages.</p><p>There is a trick to writing C++ code in a scalable way. I would call it “write C++ the Google way”. Google has been using C++ for decades and has accumulated a wealth of expertise in writing C++ code that is safe, performant, and maintainable. And that expertise is readily available on GitHub.</p><p>In this article, I want to introduce you to some open-source projects that make writing C++ code enjoyable. These projects are designed to work seamlessly together, yet you can pick and choose the ones that best fit your needs.</p><h2 id="google-c-style-guide-lingua-franca">Google C++ Style Guide: Lingua Franca</h2><p><a href="https://google.github.io/styleguide/cppguide.html">Explore the Guide on GitHub</a></p><p>The Google C++ Style Guide explains how to make C++ code beautiful. This comprehensive set of conventions ensures consistency across projects, making it easier for developers to dive into new codebases with confidence.</p><p>The guide goes beyond mere stylistic choices like indentation width (<a href="https://google.github.io/styleguide/cppguide.html#Spaces_vs._Tabs">2 spaces</a>) or file naming conventions (<a href="https://google.github.io/styleguide/cppguide.html#File_Names">all lowercase, with underscores (_) or dashes (-)</a>). It delves deep into language features and provides the rationale behind each decision, offering a clear path to writing high-quality, maintainable C++ code.</p><p>Perhaps the most controversial convention in the guide is the “ban” on exceptions. “<a href="https://google.github.io/styleguide/cppguide.html#Exceptions">We do not use C++ exceptions</a>” is a rule that can be hard to accept for developers coming from other languages. Yet, exceptions are not as essential as they might seem. Languages like Go thrive without them, and C++ projects like Chromium and gRPC demonstrate that robust and efficient code can be written without exceptions.</p><p>I frequently recommend this guide to developers both inside and outside Google as the simplest way to elevate the quality of their C++ code. By adhering to these well-established conventions, anyone can write C++ “the Google way” and enjoy the benefits of safer, more maintainable, and performant code.</p><h2 id="bazel-if-you-build-it-they-will-come">Bazel: If You Build It, They Will Come</h2><p><a href="https://bazel.build/">Discover Bazel</a></p><p>Bazel is a build system inspired by Google’s internal build system. Thousands of engineers at Google use Blaze daily to build countless projects, written not only in C++ but also in Java, Python, Go, other languages.</p><p>Bazel highlights:</p><ul><li><strong>Starlark Language</strong>: Bazel build files are written in Starlark, a language that is both extensible and easy to read. This simplicity makes it approachable for new users and powerful enough for complex build configurations.</li><li><strong>Efficient Caching</strong>: One of Bazel’s standout features is its efficient caching mechanism, which relies on checksums rather than timestamps. This results in significantly faster and more reliable builds, a feature I rely on daily for large C++ projects like gRPC.</li><li><strong>Dependency Tracking</strong>: Bazel excels in dependency tracking, minimizing the size of build artifacts and speeding up the build process. This feature ensures that only the necessary components are rebuilt, saving valuable time and resources.</li><li><strong>Powerful Query Language</strong>: Bazel includes a robust query language that allows developers to analyze the build graph, providing deep insights into the build process and helping to optimize it further.</li></ul><p>Bazel makes it trivial to build Protobuf libraries, supports multiple languages and most libraries I mention below are trivial to add to a Bazel project, just look at Uchen.ML module file:</p><pre class="astro-code github-dark" data-language="python" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#9ecbff">'''</span></span>
<span class="line"><span style="color:#9ecbff">Uchen core - ML framework</span></span>
<span class="line"><span style="color:#9ecbff">'''</span></span>
<span class="line"><span style="color:#e1e4e8">module(</span><span style="color:#ffab70">name</span><span style="color:#f97583"> =</span><span style="color:#9ecbff"> "uchen-core"</span><span style="color:#e1e4e8">, </span><span style="color:#ffab70">version</span><span style="color:#f97583"> =</span><span style="color:#9ecbff"> "0.1"</span><span style="color:#e1e4e8">, </span><span style="color:#ffab70">compatibility_level</span><span style="color:#f97583"> =</span><span style="color:#79b8ff"> 1</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#e1e4e8">bazel_dep(</span><span style="color:#ffab70">name</span><span style="color:#f97583"> =</span><span style="color:#9ecbff"> "abseil-cpp"</span><span style="color:#e1e4e8">, </span><span style="color:#ffab70">version</span><span style="color:#f97583"> =</span><span style="color:#9ecbff"> "20240116.2"</span><span style="color:#e1e4e8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#e1e4e8">bazel_dep(</span><span style="color:#ffab70">name</span><span style="color:#f97583"> =</span><span style="color:#9ecbff"> "googletest"</span><span style="color:#e1e4e8">, </span><span style="color:#ffab70">version</span><span style="color:#f97583"> =</span><span style="color:#9ecbff"> "1.14.0"</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#e1e4e8">git_override(</span></span>
<span class="line"><span style="color:#ffab70">    module_name</span><span style="color:#f97583"> =</span><span style="color:#9ecbff"> "googletest"</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#ffab70">    remote</span><span style="color:#f97583"> =</span><span style="color:#9ecbff"> "https://github.com/google/googletest.git"</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#ffab70">    commit</span><span style="color:#f97583"> =</span><span style="color:#9ecbff"> "1d17ea141d2c11b8917d2c7d029f1c4e2b9769b2"</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#e1e4e8">bazel_dep(</span><span style="color:#ffab70">name</span><span style="color:#f97583"> =</span><span style="color:#9ecbff"> "google_benchmark"</span><span style="color:#e1e4e8">, </span><span style="color:#ffab70">version</span><span style="color:#f97583"> =</span><span style="color:#9ecbff"> "1.8.3"</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#e1e4e8">git_override(</span></span>
<span class="line"><span style="color:#ffab70">    module_name</span><span style="color:#f97583"> =</span><span style="color:#9ecbff"> "google_benchmark"</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#ffab70">    remote</span><span style="color:#f97583"> =</span><span style="color:#9ecbff"> "https://github.com/google/benchmark.git"</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#ffab70">    commit</span><span style="color:#f97583"> =</span><span style="color:#9ecbff"> "447752540c71f34d5d71046e08192db181e9b02b"</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d"># Dev dependencies</span></span>
<span class="line"><span style="color:#e1e4e8">bazel_dep(</span><span style="color:#ffab70">name</span><span style="color:#f97583"> =</span><span style="color:#9ecbff"> "hedron_compile_commands"</span><span style="color:#e1e4e8">, </span><span style="color:#ffab70">dev_dependency</span><span style="color:#f97583"> =</span><span style="color:#79b8ff"> True</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#e1e4e8">git_override(</span></span>
<span class="line"><span style="color:#ffab70">    module_name</span><span style="color:#f97583"> =</span><span style="color:#9ecbff"> "hedron_compile_commands"</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#ffab70">    remote</span><span style="color:#f97583"> =</span></span>
<span class="line"><span style="color:#9ecbff">      "https://github.com/hedronvision/bazel-compile-commands-extractor.git"</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#ffab70">    commit</span><span style="color:#f97583"> =</span><span style="color:#9ecbff"> "a14ad3a64e7bf398ab48105aaa0348e032ac87f8"</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">)</span></span>
<span class="line"></span></code></pre><h2 id="abseil-utilities">Abseil: Utilities</h2><p><a href="https://abseil.io/">abseil.io</a></p><p>Abseil provides a wide array of utilities across various categories. Some of these utilities, such as <code>absl::string_view</code> and <code>absl::optional</code>, have already been adopted into the standard C++ library, with Abseil seamlessly using the standard versions when available. Other utilities, like my favorite <code>absl::Cleanup</code>, seem to be on track to being standartize late (see <code>std::scope_exit</code>). Many utilities in Abseil remain beyond the current scope of the standard library, offering unique functionalities that enhance C++ development.</p><p>I heavily rely on the following parts of Abseil for my projects:</p><ul><li><strong><a href="https://abseil.io/docs/cpp/guides/flags">Command Line Flags</a></strong>: Simplifies the management of command line arguments.</li><li><strong><a href="https://abseil.io/docs/cpp/guides/logging">Logging</a></strong>: Provides robust logging capabilities.</li><li><strong><a href="https://abseil.io/docs/cpp/guides/strings">String Utilities</a></strong>: Includes utilities for string joining, formatting, and more.</li></ul><p>Many classes in UchenML are augmented with <code>AbslStringify</code> which allows for very easy tracing and debugging.</p><p>I would also like to point out the <a href="https://abseil.io/tips/">C++ Tips</a> section that I would consider an essential reading for any C++ developer, on par with the Google C++ Style Guide.</p><h2 id="google-test-industry-standard">Google Test: Industry Standard</h2><p><a href="https://google.github.io/googletest/">Google Test</a></p><p>My impression is that Google Test is the most popular C++ testing framework and I often see it used in projects outside Google. Not really much to add.</p><p>I would definitely recommend to also take a look at GMock. GMock provides some <a href="https://google.github.io/googletest/reference/matchers.html">matchers</a> that can also be used for regular assertions. E.g., this is how contents of the collection can be checked ignoring the order:</p><pre class="astro-code github-dark" data-language="cpp" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#b392f0">EXPECT_THAT</span><span style="color:#e1e4e8">(collection, ::</span><span style="color:#b392f0">testing</span><span style="color:#e1e4e8">::</span><span style="color:#b392f0">UnorderedElementsAre</span><span style="color:#e1e4e8">(</span><span style="color:#79b8ff">1</span><span style="color:#e1e4e8">, </span><span style="color:#79b8ff">2</span><span style="color:#e1e4e8">, </span><span style="color:#79b8ff">3</span><span style="color:#e1e4e8">));</span></span>
<span class="line"></span></code></pre><h2 id="benchmarking-google-benchmark">Benchmarking: Google Benchmark</h2><p><a href="https://github.com/google/benchmark">GitHub</a></p><p>Writing benchmarks can be a fun and enlightening process, though it’s easy to get caught up in the quest for better numbers. Despite this, benchmarks are crucial for performance-conscious development. Modern CPUs and compilers are highly complex, making performance reasoning anything but straightforward.</p><h2 id="linters">Linters</h2><p>Linters keep the code base consistent and help to catch a lot of issues and even bugs way before the compiler is ran. <a href="https://clang.llvm.org/extra/clang-tidy/">Clang-Tidy</a> is the one I am relying on. <a href="https://include-what-you-use.org/">IWYU</a> is really helpful in keeping the includes clean, reducing number of dependencies and reducing the build times.</p><h2 id="sanitizers">Sanitizers</h2><p>Sanitizers detect and troubleshoot issues that are difficult to debug, such as memory leaks, concurrency issues, and undefined behavior. <a href="https://clang.llvm.org/docs/AddressSanitizer.html">ASAN</a> is the one I am using the most. This is the contents of the <code>.bazelrc</code> set adds a special Bazel config so ASAN can be ran at any time on any target by adding <code>--config=asan</code> to the build command:</p><pre class="astro-code github-dark" data-language="bash" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#b392f0">build:asan</span><span style="color:#79b8ff"> --strip=never</span></span>
<span class="line"><span style="color:#b392f0">build:asan</span><span style="color:#79b8ff"> --copt=-fsanitize=address</span></span>
<span class="line"><span style="color:#b392f0">build:asan</span><span style="color:#79b8ff"> --copt=-O0</span></span>
<span class="line"><span style="color:#b392f0">build:asan</span><span style="color:#79b8ff"> --copt=-fno-omit-frame-pointer</span></span>
<span class="line"><span style="color:#b392f0">build:asan</span><span style="color:#79b8ff"> --copt=-DGPR_NO_DIRECT_SYSCALLS</span></span>
<span class="line"><span style="color:#b392f0">build:asan</span><span style="color:#79b8ff"> --copt=-DADDRESS_SANITIZER</span><span style="color:#6a737d">  # used by absl</span></span>
<span class="line"><span style="color:#b392f0">build:asan</span><span style="color:#79b8ff"> --linkopt=-fsanitize=address</span></span>
<span class="line"><span style="color:#b392f0">build:asan</span><span style="color:#79b8ff"> --action_env=ASAN_OPTIONS=detect_leaks=1:color=always</span></span>
<span class="line"></span></code></pre><p>Other sanitizers worth mentioning are:</p><ul><li><a href="https://clang.llvm.org/docs/ThreadSanitizer.html">TSAN</a></li><li><a href="https://clang.llvm.org/docs/MemorySanitizer.html">MSAN</a></li><li><a href="https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html">UBSAN</a></li><li><a href="https://llvm.org/docs/LibFuzzer.html">Fuzzer</a></li></ul><h2 id="serialization-protobuf">Serialization: Protobuf</h2><p><a href="https://protobuf.dev/">protobuf.dev</a></p><p>This is a language-agnostic serialization library that is much faster than JSON and provides way more compact representation. There are several implementations with different features and trade offs. <a href="https://github.com/protocolbuffers/protobuf/tree/main/upb">μpb</a> is a very lightweight C++ implemantion that uses arena allocations.</p><p>Protobufs have a large number of features that are very useful in practice:</p><ul><li>Reflection API</li><li>JSON serialization</li><li>Text serialization (makes it very tempting to use protobufs as a configuration format)</li></ul><h2 id="rpc-grpc">RPC: gRPC</h2><p><a href="https://grpc.io/">grpc.io</a></p><p>Disclamer: I am working on gRPC full-time so I am biased.</p><p>gRPC is another open-source effort that was informed and inspired by Google internal architecture. It is a proven solution (most Google Cloud APIs are implemented in gRPC) and is used by projects like TensorFlow, Firebase and many others (e.g. Bazel uses it for distributed build support).</p><p>This is what gRPC offers that is not readily available in REST:</p><ul><li>Strongly typed API with codegen support for most popular languages</li><li>Streaming support, including bi-directional streaming</li><li>Client and server side load balancing</li><li>Authentication and authorization support</li><li>A lot of configuration options for things like timeouts, retries, etc.</li><li>Built-in support for tracing and monitoring</li></ul><h2 id="portable-simd-highway">Portable SIMD: Highway</h2><p><a href="https://github.com/google/highway">GitHub</a></p><p>One can not utilize the full power of modern CPUs without using SIMD instructions. Highway library provides a portable way to use SIMD instructions across different platforms, making leveraging SIMD much more practical.</p></div><div class="flex flex-col justify-between max-w-3xl sm:flex-row mt-8 mx-auto"><ul class="rtl:mr-0 mr-5 rtl:ml-5"><li class="inline-block bg-gray-50 border border-1 border-slate-300 dark:bg-slate-700 lowercase mb-2 mr-2 px-2 py-0.5 rounded-sm rtl:ml-2 rtl:mr-0"><a href="/tag/c" class="hover:text-primary dark:hover:text-gray-200 dark:text-slate-100 text-muted">c++</a></li><li class="inline-block bg-gray-50 border border-1 border-slate-300 dark:bg-slate-700 lowercase mb-2 mr-2 px-2 py-0.5 rounded-sm rtl:ml-2 rtl:mr-0"><a href="/tag/uchen-ml" class="hover:text-primary dark:hover:text-gray-200 dark:text-slate-100 text-muted">uchen.ml</a></li><li class="inline-block bg-gray-50 border border-1 border-slate-300 dark:bg-slate-700 lowercase mb-2 mr-2 px-2 py-0.5 rounded-sm rtl:ml-2 rtl:mr-0"><a href="/tag/developement" class="hover:text-primary dark:hover:text-gray-200 dark:text-slate-100 text-muted">developement</a></li></ul><div class="align-middle dark:text-slate-600 mt-5 sm:mt-1 text-gray-500"><span class="dark:text-slate-400 align-super font-bold text-slate-500">Share:</span> <button class="ml-2 rtl:ml-0 rtl:mr-2" data-aw-social-share="twitter" data-aw-url="https://uchenml.tech/cpp-stack" title="Twitter Share" data-aw-text="Open Source C++ Stack"><svg class="w-6 h-6 dark:hover:text-slate-300 dark:text-slate-500 hover:text-black text-gray-400" viewBox="0 0 24 24" height="1em" width="1em" data-icon="tabler:brand-x"><symbol id="ai:tabler:brand-x"><path d="m4 4l11.733 16H20L8.267 4zm0 16l6.768-6.768m2.46-2.46L20 4" stroke-linecap="round" stroke-linejoin="round" fill="none" stroke="currentColor" stroke-width="2"/></symbol><use xlink:href="#ai:tabler:brand-x"></use></svg></button> <button class="ml-2 rtl:ml-0 rtl:mr-2" data-aw-social-share="facebook" data-aw-url="https://uchenml.tech/cpp-stack" title="Facebook Share"><svg class="w-6 h-6 dark:hover:text-slate-300 dark:text-slate-500 hover:text-black text-gray-400" viewBox="0 0 24 24" height="1em" width="1em" data-icon="tabler:brand-facebook"><symbol id="ai:tabler:brand-facebook"><path d="M7 10v4h3v7h4v-7h3l1-4h-4V8a1 1 0 0 1 1-1h3V3h-3a5 5 0 0 0-5 5v2z" stroke-linecap="round" stroke-linejoin="round" fill="none" stroke="currentColor" stroke-width="2"/></symbol><use xlink:href="#ai:tabler:brand-facebook"></use></svg></button> <button class="ml-2 rtl:ml-0 rtl:mr-2" data-aw-social-share="linkedin" data-aw-url="https://uchenml.tech/cpp-stack" title="Linkedin Share" data-aw-text="Open Source C++ Stack"><svg class="w-6 h-6 dark:hover:text-slate-300 dark:text-slate-500 hover:text-black text-gray-400" viewBox="0 0 24 24" height="1em" width="1em" data-icon="tabler:brand-linkedin"><symbol id="ai:tabler:brand-linkedin"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M4 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm4 5v5m0-8v.01M12 16v-5"/><path d="M16 16v-3a2 2 0 0 0-4 0"/></g></symbol><use xlink:href="#ai:tabler:brand-linkedin"></use></svg></button> <button class="ml-2 rtl:ml-0 rtl:mr-2" data-aw-social-share="mail" data-aw-url="https://uchenml.tech/cpp-stack" title="Email Share" data-aw-text="Open Source C++ Stack"><svg class="w-6 h-6 dark:hover:text-slate-300 dark:text-slate-500 hover:text-black text-gray-400" viewBox="0 0 24 24" height="1em" width="1em" data-icon="tabler:mail"><symbol id="ai:tabler:mail"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M3 7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><path d="m3 7l9 6l9-6"/></g></symbol><use xlink:href="#ai:tabler:mail"></use></svg></button></div></div></article></section><div class="mx-auto max-w-3xl md:pt-4 pt-8 px-6 sm:px-6"><a href="/blog" class="flex btn btn-tertiary dark:text-slate-400 md:px-3 px-3"><svg class="h-5 w-5 -ml-1.5 mr-1 rtl:-mr-1.5 rtl:ml-1" viewBox="0 0 24 24" height="1em" width="1em" data-icon="tabler:chevron-left"><symbol id="ai:tabler:chevron-left"><path d="m15 6l-6 6l6 6" stroke-linecap="round" stroke-linejoin="round" fill="none" stroke="currentColor" stroke-width="2"/></symbol><use xlink:href="#ai:tabler:chevron-left"></use></svg> Back to Blog</a></div></main><footer class="border-t bg-amber-100 bg-gradient-to-tr dark:bg-slate-800 mt-20"><div class="mx-auto lg:px-5 max-w-7xl md:px-14 px-5 sm:px-8 w-full overflow-auto pb-8 relative"><div class="flex items-center gap-4 min-h-max mt-8 text-heading-3"><div class="h-auto flex-grow md:text-lg self-stretch text-heading-3">&copy; <span id="year">2024</span> Eugene Ostroukhov. All right reserved</div><a href="https://www.linkedin.com/in/eostroukhov/" class="hover:scale-105 hover:text-heading-1 transition"><svg class="h-5 w-5" viewBox="0 0 16 16" height="16" width="16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"></path></svg> <span class="sr-only">social link</span> </a><a href="https://twitter.com/eeuoss" class="hover:scale-105 hover:text-heading-1 transition"><svg class="h-5 w-5" viewBox="0 0 16 16" height="16" width="16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"></path></svg> <span class="sr-only">social link</span> </a><a href="https://github.com/eugeneo" class="hover:scale-105 hover:text-heading-1 transition"><svg class="h-5 w-5" viewBox="0 0 16 16" height="16" width="16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg> <span class="sr-only">social link</span></a></div></div></footer><script>!function(){const e="system";if(window.basic_script)return;function t(e){"dark"===e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}window.basic_script=!0;const d=function(){e&&e.endsWith(":only")||(localStorage.theme,0)?t(e.replace(":only","")):"dark"===localStorage.theme||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):t("light")};function a(e,t,d){const a="string"==typeof e?document.querySelectorAll(e):e;a&&a.length&&a.forEach((e=>{e.addEventListener(t,(t=>d(t,e)),!1)}))}d();const o=function(){let t=window.scrollY,d=!0;a("#header nav","click",(function(){document.querySelector("[data-aw-toggle-menu]")?.classList.remove("expanded"),document.body.classList.remove("overflow-hidden"),document.getElementById("header")?.classList.remove("h-screen"),document.getElementById("header")?.classList.remove("expanded"),document.getElementById("header")?.classList.remove("bg-page"),document.querySelector("#header nav")?.classList.add("hidden"),document.querySelector("#header > div > div:last-child")?.classList.add("hidden")})),a("[data-aw-toggle-menu]","click",(function(e,t){t.classList.toggle("expanded"),document.body.classList.toggle("overflow-hidden"),document.getElementById("header")?.classList.toggle("h-screen"),document.getElementById("header")?.classList.toggle("expanded"),document.getElementById("header")?.classList.toggle("bg-page"),document.querySelector("#header nav")?.classList.toggle("hidden"),document.querySelector("#header > div > div:last-child")?.classList.toggle("hidden")})),a("[data-aw-toggle-color-scheme]","click",(function(){e.endsWith(":only")||(document.documentElement.classList.toggle("dark"),localStorage.theme=document.documentElement.classList.contains("dark")?"dark":"light")})),a("[data-aw-social-share]","click",(function(e,t){const d=t.getAttribute("data-aw-social-share"),a=encodeURIComponent(t.getAttribute("data-aw-url")),o=encodeURIComponent(t.getAttribute("data-aw-text"));let c;switch(d){case"facebook":c=`https://www.facebook.com/sharer.php?u=${a}`;break;case"twitter":c=`https://twitter.com/intent/tweet?url=${a}&text=${o}`;break;case"linkedin":c=`https://www.linkedin.com/shareArticle?mini=true&url=${a}&title=${o}`;break;case"whatsapp":c=`https://wa.me/?text=${o}%20${a}`;break;case"mail":c=`https://mail.google.com/?subject=%22${o}%22&body=${o}%20${a}`;break;default:return}const n=document.createElement("a");n.target="_blank",n.href=c,n.click()}));function o(){const e=document.querySelector("#header[data-aw-sticky-header]");e&&(t>60&&!e.classList.contains("scroll")?e.classList.add("scroll"):t<=60&&e.classList.contains("scroll")&&e.classList.remove("scroll"),d=!1)}window.matchMedia("(max-width: 767px)").addEventListener("change",(function(){document.querySelector("[data-aw-toggle-menu]")?.classList.remove("expanded"),document.body.classList.remove("overflow-hidden"),document.getElementById("header")?.classList.remove("h-screen"),document.getElementById("header")?.classList.remove("expanded"),document.getElementById("header")?.classList.remove("bg-page"),document.querySelector("#header nav")?.classList.add("hidden"),document.querySelector("#header > div > div:last-child")?.classList.add("hidden")})),o(),a([document],"scroll",(function(){t=window.scrollY,d||(window.requestAnimationFrame((()=>{o()})),d=!0)}))},c=function(){document.documentElement.classList.add("motion-safe:scroll-smooth");const e=document.querySelector("[data-aw-toggle-menu]");e&&e.classList.remove("expanded"),document.body.classList.remove("overflow-hidden"),document.getElementById("header")?.classList.remove("h-screen"),document.getElementById("header")?.classList.remove("expanded"),document.querySelector("#header nav")?.classList.add("hidden")};window.onload=o,window.onpageshow=c,document.addEventListener("astro:after-swap",(()=>{d(),o(),c()}))}()</script></body></html>